<% title t('component_model.index.title') %>

<% content_for :sidebar do %>
  <li class="nav-header"><%= t(".actions") %></li>
  <%= sidebar_link(:new, ComponentModel.new) %>
  <li class="nav-header"><%= t("component_model.sidebar.filters") %></li>
  <%= sidebar_link(:index, nil, { path: component_models_path                 }, { text: t("component_model.sidebar.all.text").html_safe             }) %>
  <%= sidebar_link(:index, nil, { path: circulating_component_models_path     }, { text: t("component_model.sidebar.circulating.text").html_safe     }) %>
  <%#= sidebar_link(:index, nil, { path: non_circulating_component_models_path }, { text: t("component_model.sidebar.non_circulating.text").html_safe }) %>
<% end %>

<%= paginate @component_models %>

<table class="table">
  <thead>
    <tr>
      <th>Brand</th>
      <th>Model</th>
      <th>Description</th>
      <th>Count</th>
      <th class="actions"><%= t('.actions', default: t('helpers.headers.actions')) %></th>
    </tr>
  </thead>
  <tbody>
    <% component_models.each do |cm| %>
      <tr>
        <td><%= link_to cm.brand.name, brand_path(cm.brand) %></td>
        <td><%= link_to cm.name, component_model_path(cm) %></td>
        <td><%= cm.description %></td>
        <td><%= cm.kits.count %></td>
        <td class="mini-action-buttons">
          <%= mini_button(:index, nil, { path: component_model_kits_path(cm) }, { text: t('kit.index.title') }) %>
          <%= mini_button(:edit, cm) %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<%= paginate @component_models %>
